{% extends 'vacay/base_search.html' %}
{% block title %}My Service Schedule{% endblock %}
{% block body %}
<br>
<br>
<br>
<br>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
<link rel="stylesheet" href="../lib/w3.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>
  <script>
      WebFont.load({
      google: {
      families: ["Lato:100,300,400,700,900","Karla:regular","Cookie:regular"]
    }
    });
</script>

<style>

html, body{
  background:linear-gradient(0deg,rgba(20,150,250,0.3),rgba(0,100,250,0.3)), url("/static/vacay/images/pattern3.jpg") no-repeat center center fixed;
  background-size:cover;
}

#list{
  border-radius:20px;
  background:linear-gradient(0deg,rgba(20,150,250,0.4),rgba(0,100,250,0.3)), url("/static/vacay/images/pattern3.jpg") no-repeat center center fixed;
  background-size:cover;
}

#myBtn {
  display: none;
  position: fixed;
  bottom: 100px;
  right: 10px;
  z-index: 99;
  border: none;
  outline: none;
  background-color: red;
  color: white;
  cursor: pointer;
  padding: 10px;
  border-radius: 15px;
}

#myBtn:hover {
  background-color: blue;
}
#admin{
    display:none;
}

#edit {
  border-radius: 5px;
  max-width:550px;
  width:auto;
  margin:auto;
  height:auto;
  background-image: url("/static/vacay/images/pattern4.jpg");
  background-size:cover;
  overflow: hidden;
  box-shadow: 10px 10px 0 rgba(0, 0, 0, 0.2);
}
#edit:hover {
  background-image: url("/static/vacay/images/pattern1.jpg");
  background-size:cover;
}

.label {
    font-size:16px;
    font-weight:500;
    margin-left:10px;
    color: #04a2be;;
}

.button {
    padding:8px 15px;
    background:#86592d;
    color:white;
    border-radius:8px;
    margin-left:10px;
    font-size:16px;
    font-weight:600;
}

#save {
    padding:8px 15px;
    background:#c68c53;
    color:white;
    border-radius:8px;
    margin-left:10px;
    font-size:16px;
    font-weight:600;
}

#start {
  border-radius: 8px;
  border: 1px solid #fff;
  width: auto;
  height: 60px;
  text-align:center;
  display:inline-block;
}

#end {
  border-radius: 8px;
  border: 1px solid #fff;
  width: auto;
  height: 60px;
  text-align:center;
  display:inline-block;
}

input {
  width: auto;
  height: 58px;
  border-radius: 8px;
  padding: 0px 15px;
  opacity: 0.8;
  color:white;
  text-align:center;
  border:none;
}

textarea {
  border-radius: 8px;
  border: none;
  margin: 0;
  width: 100%;
  height: 100px;
  float: middle;
  padding: 15px 15px;
  opacity: 0.8;
  color:#0059b3;
  background:rgb(204, 228, 255);
}

.form-group {
  overflow: hidden;
  width:100%;
}

.contentform {
  padding: 8px 8px;
}

::-webkit-scrollbar {
    width: 0px;  /* remove scrollbar space */
    background: transparent;  /* optional: just make scrollbar invisible */
}
/* optional: show position indicator in red */
::-webkit-scrollbar-thumb {
    background: #FF0000;
}

::placeholder {
    color: white;
    opacity: 1; /* Firefox */
}

:-ms-input-placeholder { /* Internet Explorer 10-11 */
   color: white;
}

::-ms-input-placeholder { /* Microsoft Edge */
   color: white;
}

</style>

{% if success %}
<script>alert("Success!");</script>
{% endif %}

{% if error %}
<script>alert("Failure");</script>
{% endif %}

<div id="title" style="font-size:25px; font-weight:800; color: #F7D479; text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.7); text-align:center;
	position:fixed; left:50%; float:middle; transform:translate(-50%, -50%); width:400px; z-index:100; top:130px; display:block;">MY SERVICE SCHEDULE</div>
<span style="font-size:18px; font-weight:600; color: #F7D479; text-shadow: 2px 2px 0px rgba(0, 0, 0, 0.7);
	position:fixed; left:50%; float:middle; margin-top:30px; display:none;
	transform:translate(-50%, -50%); width:auto; z-index:100; top:110px;" id="subtitle">Service-Unavailable</span>

<div onclick="showAlert()" id="alert" style="font-size:16px; font-weight:300; color: red; text-align:center; box-shadow: 4px 5px 0 rgba(0, 0, 0, 0.3);
	position:fixed; left:50%; float:middle; background-color:white; border-radius:10px; padding: 5px 10px 5px 10px;
	transform:translate(-50%, -50%); width:200px; z-index:200; top:160px; display:none;"><i class="fa fa-bell" style="font-size:18px; color:red;"></i>
	You have message!<br>
	Click here to contact it.
</div>

<img src="/static/vacay/images/logo.png" style="position:relative; width:60px; height:60px; border-radius:3%; z-index:-1; left:3%;">

<div style="width:100%; height:auto;">
    <div class="container-fluid">
  <div class="row">
    <div class="col-sm-4" style="padding:30px;">
        <div style="width:100%; margin-top:5px;">
            <img src="/static/vacay/images/datetime.png" style="width:40px; height:auto; float:left;">
            <div style="color:white; font-size:20px; font-weight:500; float:left; margin-top:3px; margin-left:15px; font-family:verdana;">
                <label style="font-size:16px; color:yellow; font-family:cursive;">Unavailable</label> Schedule Setup
            </div>
        </div>
        <br>
        <br>
        <br>
        <link rel="stylesheet" href="/static/vacay/jquery.datetimepicker.min.css">
        <script src="/static/vacay/jquery.datetimepicker.full.js"></script>
        <div style="padding:10px; width:100%;">
            <div class="form-group" style="">
                <div id="start"  style="margin-top:8px;" onchange="updatestart();">
                    <input type="text" required id="start2" name="start" placeholder="Start Date & Time" style="background:green;" readonly>
                </div>
                <span class="glyphicon glyphicon-menu-right" style="color:white; font-size:16px;"></span>
                <div id="end"  style="margin-top:8px;" onchange="updateend();">
                    <input type="text" required id="end2" name="end" placeholder="End Date & Time" style="background:blue;" readonly>
                </div>
            </div><br>
            <script src="https://rawgit.com/jackmoore/autosize/master/dist/autosize.min.js"></script>
            <div class="form-group">
                <textarea name="comment"  rows="5" data-rule="required" data-msg="" required id="comment" placeholder="Write something ..."></textarea>
            </div>
            <script>autosize(document.getElementById("comment"));</script>
        </div>
        <script>
           jQuery('#start').datetimepicker();
           jQuery('#end').datetimepicker();
        </script>
        <script>
            function updatestart(){
                var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                var mths = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
                var start = document.getElementById("start").value;
                var year = start.substring(0, 4);
                var month = start.substring(5, 7);
                var day = start.substring(8, 10);
                var hour = start.substring(11, 13);
                var minute = start.substring(14, 16);
                var ap = '';
                if (parseInt(hour) > 12) {
                    hour = String(parseInt(hour) - 12);
                    ap = 'PM';
                }else ap = 'AM';
                var monthindex = parseInt(month);
                month = months[monthindex - 1];
                document.getElementById("start2").value = month + ' ' + day + ',' + year + ' - ' + hour + ':' + minute + ' ' + ap;
            }
            function updateend(){
                var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                var mths = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
                var end = document.getElementById("end").value;
                var year = end.substring(0, 4);
                var month = end.substring(5, 7);
                var day = end.substring(8, 10);
                var hour = end.substring(11, 13);
                var minute = end.substring(14, 16);
                var ap = '';
                var monthindex = parseInt(month);
                month = months[monthindex - 1];
                if (parseInt(hour) > 12) {
                    hour = String(parseInt(hour) - 12);
                    ap = 'PM';
                }else ap = 'AM';
                document.getElementById("end2").value = month + ' ' + day + ',' + year + ' - ' + hour + ':' + minute + ' ' + ap;
            }

            var array = new Array();
            function save(){
                var start = document.getElementById("start2").value;
                var end = document.getElementById("end2").value;
                var comment = document.getElementById("comment").value;
                if (start != '' && end != ''){
                    var obj = new Object();
                    obj.start = start;
                    obj.end = end;
                    obj.comment = comment;
                    array.push(obj);
                    document.getElementById("start2").value = "";
                    document.getElementById("end2").value = "";
                    document.getElementById("comment").value = "";
                }else alert("Please input times");
            }
            function submit(){
                if (array.length > 0){
                    var jsonArr = JSON.parse(JSON.stringify(array));
                    var jsonObj = {
                        'schedule': jsonArr
                    }
                    var data = JSON.stringify(jsonObj);
                    post('/uploadproviderschedule', {'data':data})
                }else alert("Please input times");
            }

            function post(path, params, method) {
                method = method || "post"; // Set method to post by default if not specified.

                // The rest of this code assumes you are not using a library.
                // It can be made less wordy if you use one.
                var form = document.createElement("form");
                form.setAttribute("method", method);
                form.setAttribute("action", path);

                for(var key in params) {
                    if(params.hasOwnProperty(key)) {
                        var hiddenField = document.createElement("input");
                        hiddenField.setAttribute("type", "hidden");
                        hiddenField.setAttribute("name", key);
                        hiddenField.setAttribute("value", params[key]);

                        form.appendChild(hiddenField);
                    }
                }

                document.body.appendChild(form);
                form.submit();
            }
        </script>
        <br>
        <center>
            <div style="width:auto;">
                <button class="button" id="save" onclick="save();">Save</button>
                <button class="button" onclick="submit();">Submit</button>
            </div>
        </center>
    </div>
    <div class="col-sm-8" style="overflow:auto; height:84%;" onscroll="scrollFunction();" id="list">
        {% if schedules %}
            <div style="width:100%; height:100%; padding-top:3%; padding-bottom:3%;">
                <div style="font-size:20px; font-weight:600; margin-bottom:30px;
                    color: #fff; text-align:center; width:100%;"><label style="font-size:16px; color:yellow; font-family:cursive;">Unavailable</label> Schedule</div>
                <div class="container-fluid">
                    <div class="row">
                        {% for schedule in schedules %}
                        <div class="col-sm-6">
                            <div id="edit">
                                <!--<input type="hidden" id="user_id" value="{{user_id}}">-->
                                <div class="contentform">
                                    <div style="width:100%;">

                                        <div style="padding-left:20px; color: #04a2be; font-weight:400; font-size:16px; text-align:left; word-break: break-all; word-wrap: break-word; text-align:left;">
                                            From: <label class="label">{{schedule.availableStart}}</label>
                                        </div>
                                        <div style="padding-left:20px; color: #04a2be; font-weight:400; font-size:16px; text-align:left; word-break: break-all; word-wrap: break-word; text-align:left;">
                                            To: <label class="label" style="margin-left:30px;">{{schedule.availableEnd}}</label>
                                        </div>
                                        <div style="padding: 10px 10px 10px 20px; color: #04a2be; font-weight:400;
                                            font-size:18px; text-align:left; word-break: break-all; word-wrap: break-word; text-align:left;">
                                            Reason: <label class="label">{{schedule.availableComment}}</label>
                                        </div>
                                        <input type="hidden" id="availableid" value="{{schedule.availableid}}">
                                        <div style="width:100%; text-align:right; margin-bottom:8px;">
                                            <a href="/deleteschedule/{{schedule.availableid}}" onclick="return confirm('Are you sure delete it?');" class="btn btn-info btn-lg" style="padding:3px 8px 3px 8px; font-size:14px; text-align:center;">
                                                <span class="glyphicon glyphicon-trash" style="padding-right:8px;"></span>Delete
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                        </div>
                {% endfor %}
                    </div>
                </div>
            </div>
        {%else %}
        <center>
            <br>
            <br>
            <br>
            <br><br>
            <h3 class="my_items col-sm-offset-1" style="color:red; margin: 30px;">No Unavaiable Schedule Info...</h3></center>

        {% endif %}

    </div>
  </div>
</div>
</div>

<meta charset="UTF-8">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">

<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
<script>
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
 //   alert("Hello");
    if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20 || document.getElementById("list").scrollTop > 20) {
        document.getElementById("myBtn").style.display = "block";
    } else {
        document.getElementById("myBtn").style.display = "none";
    }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
    document.getElementById("list").scrollTop = 0;
}

</script>

{% endblock %}


















